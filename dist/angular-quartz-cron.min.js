/**
 * UI Component For Creating Cron Job Syntax To Send To Server
 * @version v1.0.0 - 2016-04-22 * @link https://github.com/RajanRastogi/angular-quartz-cron
 * @author Rajan Rastogi <rajan1311@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("templates-angularquartzcron",["cronselection.html"]),angular.module("cronselection.html",[]).run(["$templateCache",function(a){a.put("cronselection.html",'<div class="cron-wrap">\n<span>Every: </span>\n	<select class="cron-select" ng-model="myFrequency.base" ng-options="item.value as item.label for item in frequency"></select>\n\n	<div class="select-options">\n		<span ng-show="myFrequency.base == 4">on </span>\n		<select ng-show="myFrequency.base == 4" class="cron-select day-value" ng-model="myFrequency.dayValue" ng-options="(value | aqc_dayName) for value in dayValue"></select>\n		<span ng-show="myFrequency.base >= 5">on the </span>\n		<select ng-show="myFrequency.base >= 5" class="cron-select day-of-month-value" ng-model="myFrequency.dayOfMonthValue" ng-options="(value | aqc_numeral) for value in dayOfMonthValue"></select>\n		<span ng-show="myFrequency.base == 6">of </span>\n		<select ng-show="myFrequency.base == 6" class="cron-select month-value" ng-model="myFrequency.monthValue" ng-options="(value | aqc_monthName) for value in monthValue"></select>\n		<span ng-show="myFrequency.base >= 2">at </span>\n		<select ng-show="myFrequency.base >= 3" class="cron-select hour-value" ng-model="myFrequency.hourValue" ng-options="value for value in hourValue"></select>\n		<span ng-show="myFrequency.base >= 3"> : </span>\n		<select ng-show="myFrequency.base >= 2" class="cron-select minute-value" ng-model="myFrequency.minuteValue" ng-options="value for value in minuteValue"></select>\n		<span ng-show="myFrequency.base == 2"> past the hour</span>\n	</div>\n</div>\n')}]),angular.module("angular-quartz-cron",["templates-angularquartzcron"]),angular.module("angular-quartz-cron",["templates-angularquartzcron"]),angular.module("angular-quartz-cron").directive("quartzCronSelection",["aqc.cronService",function(a){return{restrict:"EA",replace:!0,transclude:!0,scope:{config:"=",output:"=?",init:"=?",mode:"=?"},templateUrl:function(a,b){return b.template||"cronselection.html"},link:function(b){var c=void 0,d=!1;if(b.frequency=[{value:1,label:"Minute"},{value:2,label:"Hour"},{value:3,label:"Day"},{value:4,label:"Week"},{value:5,label:"Month"},{value:6,label:"Year"}],angular.isDefined(b.init)&&(c=angular.copy(b.init),c=c||"",b.myFrequency=a.fromCron(angular.copy(c))),b.$watch("init",function(e){angular.isDefined(e)&&e&&e!==c&&(d=!0,b.myFrequency=a.fromCron(e))}),"object"==typeof b.config&&!b.config.length){var e=Object.keys(b.config.options);for(var f in e){var g=e[f].replace(/^allow/,""),h=e[f];if(!b.config.options[h])for(var i in b.frequency)b.frequency[i].label===g&&b.frequency.splice(i,1)}}b.minuteValue=[0,5,10,15,20,25,30,35,40,45,50,55],b.hourValue=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],b.dayOfMonthValue=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],b.dayValue=[1,2,3,4,5,6,7],b.monthValue=[1,2,3,4,5,6,7,8,9,10,11,12],b.$watch("myFrequency",function(c,e){!c||e&&c.base===e.base||d?c&&c.base&&e&&e.base&&(d=!1):(c&&c.base&&(c.base=parseInt(c.base)),c&&c.base&&c.base>=2&&(c.minuteValue=b.minuteValue[0]),c&&c.base&&c.base>=3&&(c.hourValue=b.hourValue[0]),c&&c.base&&4===c.base&&(c.dayValue=b.dayValue[0]),c&&c.base&&c.base>=5&&(c.dayOfMonthValue=b.dayOfMonthValue[0]),c&&c.base&&6===c.base&&(c.monthValue=b.monthValue[0])),b.output=a.setCron(c)},!0)}}}]).filter("aqc_numeral",function(){return function(a){switch(a){case 1:return"1st";case 2:return"2nd";case 3:return"3rd";case 21:return"21st";case 22:return"22nd";case 23:return"23rd";case 31:return"31st";case null:return null;default:return a+"th"}}}).filter("aqc_monthName",function(){return function(a){var b={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"};return null!==a&&angular.isDefined(b[a])?b[a]:null}}).filter("aqc_dayName",function(){return function(a){var b={1:"Sunday",2:"Monday",3:"Tuesday",4:"Wednesday",5:"Thursday",6:"Friday",7:"Saturday"};return null!==a&&angular.isDefined(b[a])?b[a]:null}}),angular.module("angular-quartz-cron").factory("aqc.cronService",function(){var a={};return a.setCron=function(a){var b=["0","*","*","*","*","?"];return a&&a.base&&a.base>=2&&(b[1]=void 0!==typeof a.minuteValue?a.minuteValue:"0"),a&&a.base&&a.base>=3&&(b[2]=void 0!==typeof a.hourValue?a.hourValue:"*"),a&&a.base&&4===a.base&&(b[3]="?",b[5]=a.dayValue),a&&a.base&&a.base>=5&&(b[3]=void 0!==typeof a.dayOfMonthValue?a.dayOfMonthValue:"?"),a&&a.base&&6===a.base&&(b[4]=void 0!==typeof a.monthValue?a.monthValue:"*"),b.join(" ")},a.fromCron=function(a){var b=a.replace(/\s+/g," ").split(" "),c={base:"1"};return"*"===b[1]&&"*"===b[2]&&"*"===b[3]&&"*"===b[4]&&"?"===b[5]?c.base=1:"*"===b[2]&&"*"===b[3]&&"*"===b[4]&&"?"===b[5]?c.base=2:"*"===b[3]&&"*"===b[4]&&"?"===b[5]?c.base=3:"?"===b[3]?c.base=4:"*"===b[4]&&"?"===b[5]?c.base=5:"?"===b[5]&&(c.base=6),"*"!==b[1]&&(c.minuteValue=parseInt(b[1])),"*"!==b[2]&&(c.hourValue=parseInt(b[2])),"*"!==b[3]&&"?"!==b[3]&&(c.dayOfMonthValue=parseInt(b[3])),"*"!==b[4]&&(c.monthValue=parseInt(b[4])),"*"!==b[5]&&"?"!==b[5]&&(c.dayValue=parseInt(b[5])),c},a});